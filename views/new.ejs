<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
    crossorigin="anonymous">
  <link rel="stylesheet" href="/stylesheets/main.css">
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900' rel='stylesheet' type='text/css'>
  <title>iamRapid</title>
  <style>
   
  </style>
</head>

<body>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>

<!--navbar-------------------------------------------------------------------------------------------------------------------------->
<nav class="navbar fixed-top  navbar-expand-md navbar-dark bg-dark">
  <a class="navbar-brand" href="#">IamRapid</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Contact Us</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">About Us</a>
      </li>
    </ul>
    <div class="form-inline my-2 my-lg-0">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit"><a href="/mycart" >Cart :  <span id="cartItems"><%=cartItems%></span> </a></button>
    </div>
  </div>
</nav>

<!---------------------------------------------------------------------------------------------------------------------------------->
<div class="container marginNav">
  <hr>
<div class="row">
    <div class="col-md-12 m-auto ">
      <!--<h1 class="text-center display-4 my-4">Home Page</h1>-->
      
      <!--<div class="custom-file mb-3" style = "border : 1px solid black">-->
      <form action="/upload" method="POST" enctype="multipart/form-data" ref='uploadForm' 
      id='uploadForm' class="fileupload ddColor " style=" height:200px">
        <div class="custom-file mb-3 shadow ddColor" style="height:200px; border: 2px solid lightgray">
            <input type="file" name="sampleFile" class="custom-file-input ddColor " onchange="form.submit()" style="height:200px"/>
            <label for="file" class="custom-file-label ddColor" >
              <p>  </p>
              <h2> Drag and Drop files or Click to upload</h2>
              <hr>
              <h5>Supported file formats:</h5>
              <p>.stl or .zip</p>
            </label>
        </div>
      </form>
      <!--</div>-->
      
      <hr>
    </div>

<div class="container">
  <div class="row">
<% obj.forEach(function(data){ %>
  
  <div class="col-lg-12 col-md-12 shadow" style="border: 1px solid darkgray; margin: 10px 0; height:300px; border-radius:  .5rem .5rem "  >
   
    <div class="row">
    <div class="thumbnail col-lg-4 col-md-4" style="border-right: 1px solid darkgray; height:298px; background-color:white; ">
        <img src="/<%=data.name%>.jpg" height="80%"/>
    </div>
    
    <div class="col-lg-4 col-md-4 addBackgroundColor" style="border-right: 1px solid darkgray; height:298px;">
        <h5 style="margin-top:10px;"><%=data.name%></h5>
        <div style="margin-top:5px;">  
            <select class="custom-select" id="printer">
              <option value="1" default id="disablePT" >Printer (default-FDM Printer)</option>
              <option value="1" density="1.2">FDM Printer</option>
              <option value="2" density="1.2">SLA Printer</option>
            </select>
        </div>
        <div id="printer1">
            <select class="custom-select" id="material">
              <option value="<%=Math.ceil(20*Number(data.printTime)+(10*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" default id="disableMT" >Material (default-PLA(White))</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(10*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">PLA (White)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(10*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">PLA (Black)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(10*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">PLA (Brown)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(10*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">PLA (Yellow)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(10*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">PLA (Blue)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(10*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">PLA (Green)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(10*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">PLA (Red)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(12*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">PLA (Transparent)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(12*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">ABS (White)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(12*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">ABS (Black)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(12*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">ABS (Brown)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(12*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">ABS (Yellow)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(12*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">ABS (Blue)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(12*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">ABS (Green)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(12*Math.ceil(Number(data.weight)*0.00125+2))+100)%>" density="1.25">ABS (Red)</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(15*Math.ceil(Number(data.weight)*0.00121+2))+100)%>" density="1.21">Flexible</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(25*Math.ceil(Number(data.weight)*0.00130+2))+100)%>" density="1.3">Carbon Fibre</option>
              <option value="<%=Math.ceil(20*Number(data.printTime)+(25*Math.ceil(Number(data.weight)*0.00110+2))+100)%>" density="1.1">Nylon</option>
              <input type="text" name="fileName" value="<%=data.name%>" style="display : none"/>
            </select>
        </div>
        <div id="printer2">  
            <select class="custom-select" id="material2">
              <option value="<%=Math.ceil((100*Math.ceil(Number(data.weight)*0.0012+2))+100)%>" default id="disableMT2" >Material (default-Solid Resin)</option>
              <option value="<%=Math.ceil((100*Math.ceil(Number(data.weight)*0.0012+2))+100)%>" density="1.2">Solid Resin</option>
              <option value="<%=Math.ceil((200*Math.ceil(Number(data.weight)*0.0012+2))+100)%>" density="1.2">Casting Resin</option>
              <input type="text" name="fileName" value="<%=data.name%>" style="display : none"/>
            </select>
        </div>
      
      <form action="/modify/<%=data._id%>" method="POST" name="<%=data._id%>" id="modifyVal">
        <div class="row">
          <div class="col-lg-5 col-md-5" >
            <label class="mr-sm-2" for="inlineFormCustomSelect"><p style="font-size:16px;">Layer Height</p></label>
          </div>
          <div class="col-lg-7 col-md-7" >
          <select class="custom-select mr-sm-2" name="height" id="layerHeight" >
            <option default id="disableLH">Normal 200µm</option>
            <option value="0.1">Fine 100µm</option>
            <option value="0.2">Normal 200µm</option>
            <option value="0.3">Coarse 300µm</option>
            <input type="text" name="fileName" value="<%=data.name%>" style="display : none"/>
          </select>
          </div>
        </div>
          <div class="row">
            <div class="col-lg-5 col-md-5">
              <label class="mr-sm-2" for="inlineFormCustomSelect"><p style="font-size:16px;">Infill</p></label>
            </div>
            <div class="col-lg-7 col-md-7">
            <select class="custom-select mr-sm-2" id="infill" name='infill'>
              <option default id="disableIF" >High 30%</option>
              <option value="1.1667">High 30%</option>
              <option value="3.5">Medium 20%</option>
              <option value="7.0">Low 10%</option>
              <input type="text" name="fileName" value="<%=data.name%>" style="display : none"/>
            </select>
            </div>
        </div>
        
        <button id="submit" type="submit" style="display : none" class="button2"><span>Submit </span></button>    
      
      </form>
    </div>
    
    <div class="col-lg-4 col-md-4 addBackgroundColor" style="height:298px; border-radius: 0 .5rem .5rem 0">
        
        <h4 style="margin-top:10px;"><strong>Price : ₹<span id="price"><%=Math.ceil(20*Number(data.printTime)+(10*Math.ceil(Number(data.weight)*0.00125+2))+100)%></span></strong></h4><p style="margin-bottom:1px;"> (Exclusive of GST)</p>
        <div class="form-row align-items-center" style="margin-top:1px;">
          <div class="col-auto my-1">
            <label class="mr-sm-2" for="inlineFormCustomSelect"><h5 class='quantity'>Quantity</h5></label>
          </div>
          <div class="qty-input">
            <i class="less">-</i>
              <input id="quantity" type="text" value="1"/>
            <i class="more">+</i>
          </div>
        </div> 
      <form action="/AddToCart/<%=data._id%>" id="<%=data._id%>" method="POST">
        <input type="text" name="quantity"  id="quantityDisplay" value="1"  style="display : none">
        <input type="text" id="totalPrice"  name="Price"  value="<%=Math.ceil(20*Number(data.printTime)+(10*Math.ceil(Number(data.weight)*0.00125+2))+100)%>"  style="display : none">
        <input type="text" name="fileName" value="<%=data.name%>" style="display : none"/>
        <a href="#" class="btn btn-sm animated-button thar-one" onclick="document.getElementById('<%=data._id%>').submit();">Add to Cart</a> 
        
       
        <a href="/delete/<%=data._id%>" name="delete" class="btn btn-sm animated-button victoria-one" value="<%=data.name%>">&nbsp;Delete</a>
      </form>
    </div>
  </div>
     
    
    
  </div>
  
<% }); %>
 </div>
  </div>
    
</div>
</div>

  <script>
    $('#printer2').hide();
    
    $( "#printer" ).change(function(){
        $("#disablePT").prop('disabled',true);
        var x = ($( "#printer" ).val());
        if(x==1)
        {
          $('#printer2').hide();
          $('#printer1').show();
          $('#modifyVal').show();
        }
        else
        {
          $('#printer1').hide();
          $('#printer2').show();
          $('#modifyVal').hide();
        }
        console.log(x);
    });
  
  $( "#material" ).change(function(){
    $("#disableMT").prop('disabled',true);
        var x = ($( "#material" ).val());
        var y = ($( "#quantity" ).val());
        $("#price").text(x*y);
        $("#totalPrice").val(x*y);
        console.log(x*y);
  });
  
  $( "#material2" ).change(function(){
    $("#disableMT2").prop('disabled',true);
        var x = ($( "#material2" ).val());
        var y = ($( "#quantity" ).val());
        $("#price").text(x*y);
        $("#totalPrice").val(x*y);
        console.log(x*y);
  });


  $( "#layerHeight" ).change(function(){
	      $("#disableLH").prop('disabled',true);
	      
	      $( "#infill" ).change(function(){
	        $("#disableIF").prop('disabled',true);
            $('#submit').prop('style','display : block')
	      });
  });
     
  $( "#infill" ).change(function(){
	      $("#disableLH").prop('disabled',true);
	      
	      $( "#layerHeight" ).change(function(){
	        $("#disableIF").prop('disabled',true);
            $('#submit').prop('style','display : block')
	      });
  });
  
  $('.qty-input i').on('click',function() {
		val = parseInt($('.qty-input input').val());
    
		if ($(this).hasClass('less')) {
				val = val - 1;
		} else if ($(this).hasClass('more')) {
				val = val + 1;
		}

		if(val < 1) {
				val = 1;
		}

		$('.qty-input input').val(val);
		
    var z = ($( "#printer" ).val());
    if(z==1)
        {
            var x = ($( "#material" ).val());
            var y = Number(val);
            console.log(x + "  " + y);
            $("#price").text(x*y);
            $("#totalPrice").val(x*y);
        }
        else
        {
            var x = ($( "#material2" ).val());
            var y = Number(val);
            console.log(x + "  " + y);
            $("#price").text(x*y);
            $("#totalPrice").val(x*y);
        }
    
    
    
    var q = val;
    $('#quantityDisplay').val(q);
    console.log($('#quantityDisplay').val());
  });
  

  
  </script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
</body>
</html>